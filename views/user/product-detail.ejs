<%- include("../../views/partials/user/header") %>
<title>Product Detail</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css">
<style>
body {
    background: linear-gradient(to bottom, #ffe6f2, #ffffff); 
    background-size: cover;
    background-repeat: no-repeat;
}

.product-image-slider {
    display: flex;
    overflow: hidden;
    justify-content: center;
    margin-bottom: 1rem;
}

.slider-nav-thumbnails {
    display: flex;
    overflow-x: auto;
    margin-top: 1rem;
    overflow: hidden;
}

.slider-nav-thumbnails img {
    width: 100px;
    height: 100px;
    object-fit: cover;
    margin-right: 1rem;
    cursor: pointer;
}

.main {
    padding: 20px; /* Add some padding to the main section */
}

.title-detail {
    font-weight: bold;
    font-size: 24px; /* Adjust font size for the title */
}

.product-detail {
    background: rgba(255, 255, 255, 0.8); /* Slightly transparent white background for product detail */
    padding: 20px;
    border-radius: 10px; /* Rounded corners */
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
}

.breadcrumb {
    display: flex; /* Use flexbox for alignment */
    align-items: center; /* Center vertically */
    list-style: none; /* Remove default list styling */
    padding: 10px 0; /* Add some padding */
}

.breadcrumb a {
    text-decoration: none; /* Remove underline from links */
    color: #007bff; /* Change link color */
}

.breadcrumb span {
    margin: 0 5px; /* Add spacing between elements */
    color: #6c757d; /* Change color for separators */
}

.image-container {
    position: relative;
    overflow: hidden;
}

#mainImage {
    transition: transform 0.2s ease; /* Smooth transition for zoom effect */
}
</style>
</head>
<body>
<main class="main">
    <div class="page-header breadcrumb-wrap">
        <div class="container">
            <div class="breadcrumb">
                <a href="#" rel="nofollow">Home</a>
                <span> &gt; </span>
                <span>Fashion</span>
                <span> &gt; </span>
                <span>Product Detail Page</span>
            </div>
        </div>
    </div>

<section class="mt-50 mb-50 ">
<div class="container">
    <div class="row">
        <div class="col-lg-9">
            <div class="product-detail accordion-detail " style="width: 70vw; margin-bottom: 100px;">
                <div class="row mb-50">
                    <div class="col-md-6 col-sm-12 col-xs-12 ">
                        <div class="detail-gallery">
                            <span class="zoom-icon"><i class="fi-rs-search"></i></span>
                            <div class="product-image-slider bg-info image-container" style="height: 420px; width: 400px;">
                                <figure class="border-radius-10">
                                    <img src="/uploads/re-image/<%= product.productImages[0] %>" alt="Product Image 1" id="mainImage" style="width: 400px; height: 420px;">
                                </figure>
                            </div>
                            <div class="slider-nav-thumbnails">
                                <% for (let i = 0; i < product.productImages.length; i++) { %>
                                    <div>
                                        <img src="/uploads/re-image/<%= product.productImages[i] %>" alt="Thumbnail <%= i + 1 %>" class="thumbnail" onclick="changeMainImage('/uploads/re-image/<%= product.productImages[i] %>')">
                                    </div>
                                <% } %>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-12 col-xs-12">
                        <div class="detail-info">
                            <h2 class="title-detail"><%=product.productName%></h2  class="product-detail-rating">
                                <div class="pro-details-brand">
                                    <span> Brands: <a href="#"><%=product.brand%></a></span>
                                </div>
                                <div class="product-rate-cover text-end">
                                    <div class="product-rate d-inline-block">
                                        <div class="product-rating" style="width:90%">
                                            <span>★</span><span>★</span><span>★</span><span>★</span><span>☆</span>
                                        </div>
                                    </div>
                                    <span class="font-small ml-5 text-muted"> (25 reviews)</span>
                                </div>
                            </div>
                            <div class="clearfix product-price-cover">
                                <div class="product-price primary-color float-left">
                                    <div>
                                        <strike><span class="old-price font-md ml-15">Regular Price : <%=product.regularPrice%></span></strike> 
                                    </div>
                                    <br>
                                    <div>
                                        <span class="text-brand" style="font-weight: 1000;"><h4>Special Price : <%=product.salePrice%></h4></span>
                                    </div>
                                    <br><br>
                                    <span class="save-price font-md color3 ml-15">
                                        <% if (!totalOffer) { %>
                                            No Offers
                                        <% } else { %>
                                            <%= totalOffer %> % Offer
                                        <% } %>
                                    </span>
                                </div>
                            </div>
                            <div class="bt-1 border-color-1 mt-15 mb-15"></div>
                            <div class="short-desc mb-30">
                                <p><%=product.description%></p>
                            </div>
                            <div class="product_sort_info font-xs mb-30">
                                <ul>
                                    <li class="mb-10"><i class="fi-rs-crown mr-5"></i> 1 Year Brand Warranty</li>
                                    <li class="mb-10"><i class="fi-rs-refresh mr-5"></i> 30 Day Return Policy</li>
                                    <li><i class="fi-rs-credit-card mr-5"></i> Cash on Delivery available</li>
                                </ul>
                            </div>
                            <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                            <div class="detail-extralink">
                                <div class="detail-qty border radius">
                                    <a href="#" class="qty-down" onclick="">
                                        <i class="fi-rs-angle-small-down"></i>
                                    </a>
                                </div>
                                <br><br>
                                <div class="product-extra-link2">

                                    <%console.log(product.quantity)%>

                                    <% if(product.quantity===0){ %>
                                        <h4>Out of Stock</h6>
                                   <% }else{ %>

                                        <!-- <button type="submit" class="btn btn-success button-add-to-cart" onclick=""><a style="width: 200px;" type="submit" class="button button-add-to-cart" href="/addToCart?id=<%=product._id %>">Add to Cart</a> -->
                                            <a style="width: 200px;" class="btn btn-success button-add-to-cart" href="/addToCart?id=<%= product._id %>">
                                                Add to Cart
                                            </a>
                                            
                                        


                                        </button>
                                        <a aria-label="Add To Wishlist" class="action-btn hover-up" href="#">
                                            <i class="fi-rs-heart"></i>
                                        </a>

                                  <% } %>

                                   
                                </div>
                            </div>
                            <br>
                            <ul class="product-meta font-xs color-grey mt-50">
                                <li class="mb-5">Stock Code: <a href="#">FWM15VKT</a></li>
                                <li class="mb-5">Tags: <a href="#" rel="tag">Fashion</a> <a href="#" rel="tag"><%=category.name%></a> <a href="#" rel="tag">Accessories</a></li>
                                <li>Availability:<span class="in-stock text-success ml-5"><%=product.quantity%> Items in stock</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="product-reviews mt-30">
                    <h3>Customer Reviews</h3>
                    <div class="review-item">
                        <div class="review-author">John Doe</div>
                        <div class="review-rating">
                            <span>★★★★☆</span>
                        </div>
                        <div class="review-text">Great product! Highly recommend.</div>
                    </div>
                    <div class="review-item">
                        <div class="review-author">Jane Smith</div>
                        <div class="review-rating">
                            <span>★★★★★</span>
                        </div>
                        <div class="review-text">Excellent quality and fast shipping!</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</section>
</main>

<%- include("../../views/partials/user/footer") %>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/ 5.3.2/js/bootstrap.bundle.min.js"></script>
<script>
function changeMainImage(imageSrc) {
    document.getElementById('mainImage').src = imageSrc;
}

$(document).ready(function () {
    // Thumbnail click event
    $('.thumbnail').on('click', function () {
        const imageSrc = $(this).attr('src');
        $('#mainImage').attr('src', imageSrc);
        $('.thumbnail').removeClass('active');
        $(this).addClass('active');
    });

    // Zoom effect for main image
    $('.image-container').on('mousemove', function (e) {
        const offsetX = e.offsetX;
        const offsetY = e.offsetY;
        const width = $(this).width();
        const height = $(this).height();

        const xPercent = (offsetX / width) * 100;
        const yPercent = (offsetY / height) * 100;

        $('#mainImage').css({
            'transform-origin': `${xPercent}% ${yPercent}%`,
            'transform': 'scale(1.5)' // Adjust scale for zoom effect
        });
    });

    $('.image-container').on('mouseleave', function () {
        $('#mainImage').css({
            'transform-origin': 'center center',
            'transform': 'scale(1)' // Reset scale on mouse leave
        });
    });
});
</script>